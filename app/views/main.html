<!--GLOBAL MESSAGES-->
<div class="row">
    <div class="col-xs-12">
        <div id="messages" class="alert alert-success" data-ng-show="messages" data-ng-bind="messages"></div>
    </div>
</div>

<!--PROMISE TRACKER-->
<div class="row">
    <div class="col-xs-12">
        <div data-ng-show="progress.active()" style="color: red; font-size: 50px;">Enviant&hellip;</div>
    </div>
</div>

<!-- BEGIN FORM-->
<form name="partnerForm" class="form-inline" role="form" novalidate>
    <!--FIRST STEP-->
    <div class="row">
        <div class="col-xs-1">
            <span class="badge" data-ng-class="{current: currentStep == 1}">1</span>
        </div>
        <div class="col-xs-11">
            <div class="row">
                <div class="col-xs-2">
                    <span>Sel·lecciona:</span>
                </div>
                <div class="form-group col-xs-4">
                    <div class="btn-group" data-toggle="buttons">
                        <label for="usertype" class="btn btn-default green">
                            <input type="radio" name="usertype" id="usertype1" value="person" checked> Particular
                        </label>
                        <label for="usertype" class="btn btn-default green">
                            <input type="radio" name="usertype" id="usertype2" value="company"> Empresa
                        </label>
                    </div>
                </div>
                <div class="form-group col-xs-6">
                    <label for="language" class="sr-only">Idioma*:</label>
                    <select class="form-control" name="language" data-ng-model="language" data-ng-options="language.name for language in languages" required>
                        <option value="">Selecciona idioma</option>
                    </select>
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.language.$invalid">Required!</span>
                </div>
            </div>
        </div>
    </div>
    <hr>

    <!--SECOND STEP-->
    <div class="row">
        <div class="col-xs-1">
            <span class="badge" data-ng-class="{current: currentStep == 2}">2</span>
        </div>
        <div class="col-xs-11">
            <div class="row">
                <div class="form-group col-xs-3">
                    <label for="cif" class="sr-only">CIF*:</label>
                    <input type="text" name="cif" data-ng-model="cif" class="form-control" placeholder="CIF*" required />
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.cif.$error.required">Required!</span>
                </div>
                <div class="form-group col-xs-9">
                    <label for="reason" class="sr-only">Raó social*:</label>
                    <input type="text" name="cif" data-ng-model="reason" class="form-control" placeholder="Raó social*" required />
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.reason.$error.required">Required!</span>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-3">
                    <label for="dni" class="sr-only">DNI/NIE*:</label>
                    <input type="text" name="dni" data-ng-model="dni" class="form-control" placeholder="DNI/NIE*" required />
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.dni.$error.required">Required!</span>
                </div>
                <div class="form-group col-xs-9">
                    <label for="person" class="sr-only">Presona representant*:</label>
                    <input type="text" name="person" data-ng-model="person" class="form-control" placeholder="Persona representant*" required />
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.person.$error.required">Required!</span>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-6">
                    <label for="email1" class="sr-only">Email*:</label>
                    <input type="text" name="email1" data-ng-model="email1" class="form-control" placeholder="Email*" required />
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.email1.$error.required">Required!</span>
                </div>
                <div class="form-group col-xs-6">
                    <label for="email2" class="sr-only">Repeteix email*:</label>
                    <input type="text" name="email2" data-ng-model="email2" class="form-control" placeholder="Repeteix email*" required />
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.email2.$error.required">Required!</span>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-6">
                    <label for="phone1" class="sr-only">Telèfon*:</label>
                    <input type="text" name="phone1" data-ng-model="phone1" class="form-control" placeholder="Telèfon*" required />
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.phone1.$error.required">Required!</span>
                </div>
                <div class="form-group col-xs-6">
                    <label for="phone2" class="sr-only">Telèfon 2:</label>
                    <input type="text" name="phone2" data-ng-model="phone2" class="form-control" placeholder="Telèfon 2" />
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-9">
                    <label for="address" class="sr-only">Adreça*:</label>
                    <input type="text" name="address" data-ng-model="address" class="form-control" placeholder="Adreça*" required />
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.address.$error.required">Required!</span>
                </div>
                <div class="form-group col-xs-3">
                    <label for="postalcode" class="sr-only">Codi postal*:</label>
                    <input type="text" name="postalcode" data-ng-model="postalcode" class="form-control" placeholder="Codi postal*" />
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.postalcode.$error.required">Required!</span>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-6">
                    <label for="province" class="sr-only">Provincia</label>
                    <select class="form-control" name="province" required="required" data-ng-model="province" data-ng-options="province.name for province in provinces" data-ng-change="updateSelectedCity()">
                        <option value="">Provincia*</option>
                    </select>
                </div>
                <div class="form-group col-xs-6">
                    <label for="city" class="sr-only">Ciutat</label>
                    <select class="form-control" name="city" required="required" data-ng-model="city" data-ng-options="city.name for city in cities">
                        <option value="">Municipi*</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="form-group checkbox col-xs-12">
                    <label for="accept">
                        <input name="accept" type="checkbox" value="accept" required />
                        Accepto la <a target="_blank" href="#">política de privacitat</a> de Som Energia
                    </label>
                    <span class="label label-danger" data-ng-show="submitted && partnerForm.accept.$error.required">Required!</span>
                </div>
            </div>
        </div>
    </div>
    <hr>

    <!--THIRD STEP-->
    <div class="row">
        <div class="col-xs-1">
            <span class="badge" data-ng-class="{current: currentStep == 3}">3</span>
        </div>
        <div class="col-xs-11">
            <div class="row">
                <div class="col-xs-2">
                    <span>Mètode de pagament:</span>
                </div>
                <div class="form-group col-xs-10">
                    <label for="paymentmethod1" class="radio-inline">
                        <input type="radio" name="paymentmethod1" id="paymentmethod1" value="bankaccount" checked> Rebut bancari
                    </label>
                    <label for="paymentmethod2" class="radio-inline">
                        <input type="radio" name="paymentmethod2" id="paymentmethod2" value="creditcard" checked> Targeta de crèdit
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-2">
                    <span>Cost per a la cooperativa:</span>
                </div>
                <div class="col-xs-2">
                    <strong>Rebut bancari: 0€</strong>
                </div>
                <div class="col-xs-6">
                    <strong>Targeta de crèdit: 1,8€</strong>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <p class="bg-info">
                        L'aportació per a esdevenir soci/a sòn 100€<br/>
                        Els 100€ es paguen una sola vegada, no hi ha quota anual i són retornables si et dones de baixa.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12">
            <button data-ng-disabled="!submitReady" data-ng-click="submit(partnerForm)" class="btn btn-default green">Finalitza el procés</button>
        </div>
    </div>
<!-- END FORM-->
</form>

<!--OFFLINE API MODAL-->
<div id="api-server-offline-modal" class="modal fade" tabindex="-1" role="dialog" data-aria-labelledby="Webforms" data-aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-body">
            <div class="alert alert-warning">Formulari no disponible, disculpeu les molèsties.</div>
            <div class="alert alert-danger">ERROR: {{ errorMsg }}</div>
        </div>
    </div>
</div>